<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .mainGame {
            margin: 0px;
            padding: 0px;
            background-color: #cecece;
            width: 400px;
            height: 400px;
        }
        #spaceship {
            fill: orange;
            stroke: red;
            stroke-width: 2px;
        }
    </style>
</head>
<body>
    <p>Use the WASD (ZQSD on AZERTY) keys to move and steer.</p>
    <canvas class="mainGame">
    </canvas>
    <script>
        class Player {
            constructor(width,height,xPosition,yPosition){
                this.width = width;
                this.height = height;
                this.xPosition = xPosition;
                this.yPosition = yPosition; 
                moveRate = 9;
                turnRate = 5;
                angle = 0;
            }
        }

        const player = new Player(30,30,200,200);
        
        function updatePosition(offset) {
            let rad = angle * (Math.PI/180);
            position.x += (Math.sin(rad) * offset);
            position.y -= (Math.cos(rad) * offset);

            if (position.x < 0) {
                position.x = 399;
            } else if (position.x > 399) {
                position.x = 0;
            }

            if (position.y < 0) {
                position.y = 399;
            } else if (position.y > 399) {
                position.y = 0;
            }
        }
        function refresh() {
            let x = position.x - (shipSize.width/2);
            let y = position.y - (shipSize.height/2);
            let transform = "translate(" + x + " " + y + ") rotate(" + angle + " 15 15) ";

            spaceship.setAttribute("transform", transform);
        }

        let spaceship = document.getElementById("spaceship");
        window.addEventListener("keydown", function(event) {
            if (event.defaultPrevented) {
                return; // Do nothing if event already handled
            }
            switch(event.code) {
                case "KeyS":
                case "ArrowDown":
                // Handle "back"
                updatePosition(-moveRate);
                break;
                case "KeyW":
                case "ArrowUp":
                // Handle "forward"
                updatePosition(moveRate);
                break;
                case "KeyA":
                case "ArrowLeft":
                // Handle "turn left"
                angle -= turnRate;
                break;
                case "KeyD":
                case "ArrowRight":
                // Handle "turn right"
                angle += turnRate;
                break;
            }
            refresh();
            // Consume the event so it doesn't get handled twice
            event.preventDefault();
    }, true);
    </script>
</body>
</html>